<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button (click)="previousMonth()">
        <ion-icon name="chevron-back-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title class="ion-text-center">{{ getMonthTitle() }}</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="nextMonth()">
        <ion-icon name="chevron-forward-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="calendar">
    <!-- Дні тижня -->
    <div class="weekdays">
      <div class="weekday">Нд</div>
      <div class="weekday">Пн</div>
      <div class="weekday">Вт</div>
      <div class="weekday">Ср</div>
      <div class="weekday">Чт</div>
      <div class="weekday">Пт</div>
      <div class="weekday">Сб</div>
    </div>

    <!-- Дні місяця -->
    <div class="days">
      <ng-container *ngFor="let date of getDaysInMonth(); trackBy: trackByDate">
        <div class="day"
             [class.current-month]="isCurrentMonth(date)"
             [class.today]="isToday(date)"
             [class.selected]="selectedDate && date.getTime() === selectedDate.getTime()"
             (click)="selectDate(date)">
          <div class="day-number">{{ date.getDate() }}</div>
          <ng-container *ngTemplateOutlet="emotionIndicator; context: { $implicit: getEmotionForDay(date) }">
          </ng-container>
        </div>
      </ng-container>
    </div>
  </div>

  <!-- Шаблон для індикатора емоцій -->
  <ng-template #emotionIndicator let-emotion>
    <div *ngIf="emotion" class="emotion-indicator"
         [style.background-color]="emotion.color">
      <ion-icon [name]="emotion.icon"></ion-icon>
    </div>
  </ng-template>

  <!-- Деталі емоцій за вибраний день -->
  <div class="selected-day-details" *ngIf="selectedDate && getEmotionForDay(selectedDate) as emotion">
    <ion-card>
      <ion-card-header>
        <ion-card-subtitle>{{ selectedDate | date:'fullDate':'':'uk' }}</ion-card-subtitle>
        <ion-card-title>
          <ion-icon [name]="emotion.icon" [style.color]="emotion.color"></ion-icon>
          {{ emotion.type }}
        </ion-card-title>
      </ion-card-header>
      <ion-card-content *ngIf="emotion.note">
        {{ emotion.note }}
      </ion-card-content>
    </ion-card>
  </div>
</ion-content>
